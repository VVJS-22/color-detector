import React, { useEffect } from 'react'
import Head from 'next/head'
import Layout from '../components/Layout1'
import styled from 'styled-components'
import Header from '../components/Header'
import { resultProps } from '../lib/generators/layoutGenerator'
import PrimeSection from '../components/PrimeSection'
import SelectedImage from '../components/SelectedImage'
import ImageViewer from '../components/ImageViewer'
import Credits from '../components/Credits'
import PaletteBox from '../components/PaletteBox'
import Palette from '../components/Palette'
import { useRouter } from 'next/router'


// colors: {
//   'local-yellow': '#F5AA50',
//   'local-pink': '#F26263',
//   'local-blue': '#1591D8',
//   'gradient-blue': '#3BC9F3'
// }

const resultBorder = {
  border: '4px solid',
  borderImageSlice: 1,
  borderImageSource: 'linear-gradient(315deg, rgba(0,0,0,0.25) 25%, #F26263 100%)'
}

const Results = ({results, setResults}) => {

  const router = useRouter()

  useEffect(() => {
    console.log(results)
    if (!results) {
      router.push('/')
    }
  }, [results])

  return (
    <>
      <Head>
        <title>Results | Color Detector</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      {
        results && <Wrapper>
          <Layout>
            <PrimeSection primeGradient="#f5aa50">
              <Header {...resultProps} />
              <SelectedImage>
                <ImageViewer 
                src="/assets/sampleImages/sample1.png"
                styles={resultBorder}
                />
              </SelectedImage>
            </PrimeSection>
            <Credits />
            <PaletteBox>
              {
                results.map(result => (
                  <Palette 
                  key={result[0]}
                  code={result[0]} 
                  percentage={result[1]}
                  />
                ))
              }
            </PaletteBox>
          </Layout>
        </Wrapper>
      }
    </>
  )
}

const Wrapper = styled.main`
  min-height: 100vh;
  display: flex;
  justify-content: center;
  color: #ffffff;
`


export default Results